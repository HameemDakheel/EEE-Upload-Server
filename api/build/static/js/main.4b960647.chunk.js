(this["webpackJsonpupload/download-server"]=this["webpackJsonpupload/download-server"]||[]).push([[0],{70:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var c=a(14),s=a(0),n=a(15),r=a.n(n),l=a(4),i=a.n(l),o=a(8),j=a(3),d=a(7),b=a(5),m=a(9),h=a.n(m),u=a(17),x=a.n(u),O=a(1);function p(e){var t=e.username,a=new URLSearchParams(Object(b.h)().search),c=Object(s.useState)([]),n=Object(j.a)(c,2),r=n[0],l=n[1],i=a.get("path");return Object(s.useEffect)((function(){var e=[],t=a.get("path");if(t){(t=t.split("/")).shift(),t.pop();for(var c="",s=0;s<t.length;s++)c=c+"/"+t[s],e.push(c);l(e)}}),[i,a]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light rounded-5 mt-4",children:Object(O.jsx)("div",{className:"container-fluid",children:Object(O.jsx)("nav",{"aria-label":"breadcrumb",children:Object(O.jsxs)("ol",{className:"breadcrumb",children:[Object(O.jsx)("li",{className:"breadcrumb-item",children:Object(O.jsx)(d.b,{to:"/?path=/",children:"Home"})}),t?Object(O.jsx)("li",{className:"breadcrumb-item",children:Object(O.jsx)(d.b,{to:"/users/h?path=/",children:t})}):"",r.map((function(e,t){return Object(O.jsx)("li",{className:"breadcrumb-item",children:Object(O.jsx)(d.b,{to:"/?path=".concat(e,"/"),children:x.a.basename(e+"/")})},t)}))]})})})})})}var f=a(2);function g(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"d-flex justify-content-center mt-4",children:Object(O.jsx)(f.l,{color:"primary",role:"status",className:" d-block",children:Object(O.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),Object(O.jsxs)("div",{className:" d-flex justify-content-center mt-2 text-primary",children:["   ","Loading..."]})]})}function v(){var e=new URLSearchParams(Object(b.h)().search),t=Object(s.useState)([]),a=Object(j.a)(t,2),c=a[0],n=a[1],r=Object(s.useState)("true"),l=Object(j.a)(r,2),m=l[0],u=l[1],p=Object(s.useState)(e.get("path")?e.get("path"):"/"),v=Object(j.a)(p,2),N=v[0],y=v[1],w=Object(s.useRef)([]),k=Object(s.useState)(JSON.stringify({path:N,names:w.current})),S=Object(j.a)(k,2),C=S[0],I=S[1];Object(s.useEffect)((function(){y(e.get("path"))}),[e]),Object(s.useEffect)((function(){(function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("http://localhost:8080/dir-tree?path=".concat(N||"/"));case 3:t=e.sent,n(t.data),u("false"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[N]);var E=function(e){e.target.checked?w.current.push(e.target.value):w.current=w.current.filter((function(t){return!(t===e.target.value)})),I(JSON.stringify({path:N,names:w.current}))};return Object(O.jsx)("section",{className:"mb-4 mt-2",children:Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("div",{className:"card-header text-center py-3",children:Object(O.jsxs)("h5",{className:"mb-0 text-center d-flex",children:[Object(O.jsx)("div",{className:" d-flex align-items-center me-auto ms-auto ms-sm-0 mt-2 mt-sm-0 ",children:Object(O.jsx)(f.e,{id:"search-input",type:"search",label:"Search",onChange:function(){var e,t,a,c;for(e=document.getElementById("search-input").value.toUpperCase(),t=document.getElementById("Table").getElementsByTagName("tr"),c=0;c<t.length;c++)(a=t[c].getElementsByTagName("td")[0])&&((a.textContent||a.innerText).toUpperCase().indexOf(e)>-1?t[c].style.display="":t[c].style.display="none")}})}),Object(O.jsx)("div",{className:" d-flex align-items-center mx-auto ms-sm-auto me-sm-0 mt-2 mt-sm-0 ",children:Object(O.jsx)("a",{href:"http://localhost:8080/download-all?data=".concat(C),type:"submit",className:"btn btn-danger shadow-4-primary me-3",download:!0,children:"Download All"})})]})}),Object(O.jsx)("div",{className:"card-body pt-0",children:"true"===m?Object(O.jsx)(g,{}):Object(O.jsx)("div",{className:"table-responsive",children:Object(O.jsxs)("table",{id:"Table",className:"table table-hover text-nowrap table-sm table-auto",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"table-active",children:[Object(O.jsx)("th",{scope:"col",colSpan:2,children:"name"}),Object(O.jsx)("th",{scope:"col",colSpan:1,children:"Size"}),Object(O.jsx)("th",{scope:"col",colSpan:2,children:"Date"})]})}),Object(O.jsx)("tbody",{children:c.map((function(e,t){"director"===e.type?e.size="-":e.size>=1073741824?e.size=Math.floor(e.size/1073741824)+" GB":e.size>=1048576?e.size=Math.floor(e.size/1048576)+" MB":e.size=Math.floor(e.size/1024)+" KB";var a=new Date(e.atimeMs);return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{colSpan:2,children:Object(O.jsxs)("div",{className:"form-check text-start",children:[Object(O.jsx)("input",{className:"form-check-input",type:"checkbox",onClick:E,value:e.name,id:"flexCheckDefault"}),x.a.extname(e.name)?Object(O.jsx)("a",{href:"http://localhost:8080/download?file=".concat(N||"/").concat(e.name),className:"ms-2 text-default text-start",download:!0,children:e.name}):Object(O.jsx)(d.b,{to:"/?path=".concat(N||"/").concat(e.name,"/"),className:"ms-2 text-default text-start",children:e.name})]})}),Object(O.jsx)("td",{children:e.size}),Object(O.jsx)("td",{colSpan:2,children:Object(O.jsx)("p",{children:"".concat(a.toLocaleString())})})]},t)}))})]})})})]})})}function N(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p,{}),Object(O.jsx)(v,{})]})}var y=a(10),w=a(16);function k(){var e=Object(s.useState)(!1),t=Object(j.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)({username:"",path:"",password:""}),l=Object(j.a)(r,2),d=l[0],b=l[1],m=localStorage.getItem("token"),u=Object(y.d)(),x=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={username:d.username,password:d.password,path:d.path,token:m},e.prev=2,e.next=5,h.a.post("http://localhost:8080/user/register",a);case 5:e.sent.data.error||u.success("user has been registered"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),u.error("Something went wrong");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){b(Object(c.a)(Object(c.a)({},d),{},Object(w.a)({},e.target.name,e.target.value)))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.a,{onClick:function(){return n(!a)},children:"Add User"}),Object(O.jsx)(f.f,{show:a,getOpenState:function(e){return n(e)},tabIndex:"-1",children:Object(O.jsx)(f.i,{children:Object(O.jsx)(f.h,{children:Object(O.jsx)(f.g,{children:Object(O.jsx)("div",{className:"p-5",children:Object(O.jsx)("div",{className:"text-center",children:Object(O.jsxs)("form",{onSubmit:x,id:"form1",children:[Object(O.jsx)(f.e,{id:"username",name:"username",label:"Username",type:"text",required:!0,className:"mb-4",validation:"Looks good!",value:d.username,onChange:p}),Object(O.jsx)(f.e,{id:"password",name:"password",label:"Password",type:"password",required:!0,className:"mb-4",validation:"Looks good!",value:d.password,onChange:p}),Object(O.jsx)(f.e,{label:"Path",id:"path",name:"path",type:"text",className:"mb-4",required:!0,value:d.path,onChange:p}),Object(O.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Add User"})]})})})})})})})]})}function S(e){var t=e.username,a=e.path,n=Object(s.useState)(!1),r=Object(j.a)(n,2),l=r[0],d=r[1],b=Object(s.useState)({username:t,path:a}),m=Object(j.a)(b,2),u=m[0],x=m[1],p=localStorage.getItem("token"),g=Object(y.d)(),v=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={username:u.username,password:u.password,path:u.path,token:p},e.prev=2,e.next=5,h.a.post("http://localhost:8080/user/edit",a);case 5:e.sent.data.error||g.success("user has been updated"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),g.error("Something went wrong");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),N=function(e){x(Object(c.a)(Object(c.a)({},u),{},Object(w.a)({},e.target.name,e.target.value)))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{type:"button",className:"btn mx-2 btn-success btn-sm px-2 mt-md-0 mt-2",onClick:function(){return d(!l)},children:Object(O.jsx)("i",{className:"fas fa-lg fa-edit"})}),Object(O.jsx)(f.f,{show:l,getOpenState:function(e){return d(e)},tabIndex:"-1",children:Object(O.jsx)(f.i,{children:Object(O.jsx)(f.h,{children:Object(O.jsx)(f.g,{children:Object(O.jsx)("div",{className:"p-5",children:Object(O.jsx)("div",{className:"text-center",children:Object(O.jsxs)("form",{onSubmit:v,id:"form1",children:[Object(O.jsx)(f.e,{id:"username",name:"username",label:"Username",type:"text",required:!0,className:"mb-4",validation:"Looks good!",value:u.username,onChange:N}),Object(O.jsx)(f.e,{label:"Path",id:"path",name:"path",type:"text",className:"mb-4",required:!0,value:u.path,onChange:N}),Object(O.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Update User"})]})})})})})})})]})}function C(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)("true"),r=Object(j.a)(n,2),l=r[0],d=r[1],b=localStorage.getItem("token"),m=Object(y.d)();Object(s.useEffect)((function(){(function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("http://localhost:8080/user/get-users",{token:b});case 3:t=e.sent,c(t.data.data),d("false"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),m.error("Some thing went wrong please refresh the page"),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[b,m]);var u=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("http://localhost:8080/user/delete/",{token:localStorage.getItem("token"),username:t});case 3:e.sent.data.error||(m.success(t+" has been deleted successfully."),c([])),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m.error(t+" has not been deleted");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=e.users;return console.log(t),t?Object(O.jsx)("div",{className:"table-responsive",children:Object(O.jsxs)("table",{id:"Table",className:"table table-hover text-nowrap table-sm table-auto",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Username"}),Object(O.jsx)("th",{children:"Default Path"}),Object(O.jsx)("th",{children:"Actions"})]})}),Object(O.jsx)("tbody",{children:t.map((function(e,t){return console.log(e),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.username}),Object(O.jsx)("td",{children:e.path}),Object(O.jsxs)("td",{children:[Object(O.jsx)("button",{type:"button",className:"btn mx-2 btn-danger btn-sm px-2",onClick:function(){u(e.username)},children:Object(O.jsx)("i",{className:"fas fa-lg fa-trash-alt"})}),Object(O.jsx)(S,{username:e.username,path:e.path})]})]},t)}))})]})}):Object(O.jsx)("div",{className:"w-100 my-4 mx-3 text-center",children:"There is no users try add some"})};return Object(O.jsx)("section",{className:"mb-4 mt-4",children:Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("div",{className:"card-header text-center py-3",children:Object(O.jsxs)("h5",{className:"mb-0 text-center d-flex",children:[Object(O.jsx)("div",{className:" d-flex align-items-center me-auto ms-auto ms-sm-0 mt-2 mt-sm-0 ",children:Object(O.jsx)(f.e,{id:"search-input",type:"search",label:"Search",onChange:function(){var e,t,a,c;for(e=document.getElementById("search-input").value.toUpperCase(),t=document.getElementById("Table").getElementsByTagName("tr"),c=0;c<t.length;c++)(a=t[c].getElementsByTagName("td")[0])&&((a.textContent||a.innerText).toUpperCase().indexOf(e)>-1?t[c].style.display="":t[c].style.display="none")}})}),Object(O.jsx)("div",{className:" d-flex align-items-center mx-auto ms-sm-auto me-sm-0 mt-2 mt-sm-0",children:Object(O.jsx)(k,{})})]})}),Object(O.jsx)("div",{className:"card-body pt-2",children:"true"===l?Object(O.jsx)(g,{}):Object(O.jsx)(x,{users:a})})]})})}function I(e){var t=Object(b.i)().username,a=e.loggedIn,c=e.user;return a&&c.username===t&&"admin"===c.privileges?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(C,{})}):Object(O.jsx)(b.a,{to:"/"})}function E(e){var t=e.query,a=e.username,c=Object(s.useState)(!1),n=Object(j.a)(c,2),r=n[0],l=n[1],i=Object(s.useState)("tab1"),o=Object(j.a)(i,2),d=o[0],b=o[1],m=Object(s.useState)("0"),h=Object(j.a)(m,2),u=h[0],x=h[1],p=Object(s.useState)([]),g=Object(j.a)(p,2),v=g[0],N=g[1],w=Object(y.d)(),k=function(e){e!==d&&b(e)},S=function(e){e.preventDefault();for(var c=e.target,s=new FormData,n=0;n<v.length;n++)s.append("file".concat(n),v[n]);var r="http://localhost:8080/upload/".concat(a,"?path=").concat(t.get("path")||"/");console.log(v.length,c);var l=new XMLHttpRequest;l.upload.addEventListener("progress",(function(e){x("".concat(Math.round(e.loaded/e.total*100)))}),!1),l.addEventListener("load",(function(e){x("0"),w.success("Upload Complete")}),!1),l.addEventListener("error",(function(e){w.error("Upload Failed")}),!1),l.addEventListener("abort",(function(e){w.info("Upload Aborted")}),!1),l.open("POST",r),l.setRequestHeader("Authorization","Bearer "+localStorage.getItem("token")),l.send(s)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.a,{onClick:function(){return l(!r)},children:"Upload Files"}),Object(O.jsx)(f.f,{show:r,getOpenState:function(e){return l(e)},tabIndex:"-1",children:Object(O.jsx)(f.i,{children:Object(O.jsx)(f.h,{children:Object(O.jsxs)(f.g,{children:[Object(O.jsxs)(f.m,{pills:!0,justify:!0,className:"mb-3",children:[Object(O.jsx)(f.o,{children:Object(O.jsx)(f.p,{onClick:function(){return k("tab1")},active:"tab1"===d,children:"Single Upload"})}),Object(O.jsx)(f.o,{children:Object(O.jsx)(f.p,{onClick:function(){return k("tab2")},active:"tab2"===d,children:"Multiple Uploads"})})]}),Object(O.jsxs)(f.n,{children:[Object(O.jsx)(f.q,{show:"tab1"===d,children:Object(O.jsxs)("form",{onSubmit:S,children:[Object(O.jsxs)("p",{class:"note note-danger",children:[Object(O.jsx)("strong",{children:"NOTE: "})," ","Please Make Sure Your are in The Right Folder: '/".concat(a).concat(t.get("path")||"/","'")]}),Object(O.jsx)(f.e,{block:!0,className:"mt-3 ",type:"file",required:!0,onChange:function(e){N(e.target.files)}}),Object(O.jsx)(f.j,{height:"20",className:"mt-3 rounded-2",children:Object(O.jsx)(f.k,{striped:!0,animated:!0,width:u,valuemin:0,valuemax:100,children:"0"===u?"":u+" %"})}),Object(O.jsx)("hr",{}),Object(O.jsx)(f.a,{type:"submit",className:"mt-3  btn-block",color:"primary",children:"Upload"})]})}),Object(O.jsx)(f.q,{show:"tab2"===d,children:Object(O.jsxs)("form",{onSubmit:S,children:[Object(O.jsxs)("p",{class:"note note-danger",children:[Object(O.jsx)("strong",{children:"NOTE: "})," ","Please Make Sure Your are in The Right Folder: '/".concat(a).concat(t.get("path")||"/","'")]}),Object(O.jsx)(f.e,{className:"mt-3 ",type:"file",multiple:!0,required:!0,onChange:function(e){N(e.target.files)}}),Object(O.jsx)(f.j,{height:"20",className:"mt-3 rounded-2",children:Object(O.jsx)(f.k,{striped:!0,animated:!0,width:u,valuemin:0,valuemax:100,children:"0"===u?"":u+" %"})}),Object(O.jsx)("hr",{}),Object(O.jsx)(f.a,{type:"submit",block:!0,className:"mt-1",color:"primary",children:"Upload"})]})})]})]})})})})]})}function U(e){var t=e.username,a=new URLSearchParams(Object(b.h)().search),c=Object(s.useState)([]),n=Object(j.a)(c,2),r=n[0],l=n[1],m=Object(s.useState)("true"),u=Object(j.a)(m,2),p=u[0],v=u[1],N=Object(s.useState)(a.get("path")?"/".concat(t,"/").concat(a.get("path")):"/"+t),w=Object(j.a)(N,2),k=w[0],S=w[1],C=Object(y.d)();console.log(k,"pathhhhh",a.get("path")),Object(s.useEffect)((function(){S(a.get("path")?"/".concat(t,"/").concat(a.get("path")):"/"+t)}),[a,t]),Object(s.useEffect)((function(){(function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("http://localhost:8080/dir-tree?path=".concat(k||"/"));case 3:t=e.sent,l(t.data),v("false"),console.log(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[k]);var I=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={token:localStorage.getItem("token"),filename:t,path:"/"},console.log(a),e.next=5,h.a.post("http://localhost:8080/delete-file/",{token:localStorage.getItem("token"),filename:t,path:"/"});case 5:e.sent.data.error||(C.success(t+" has been deleted successfully."),l([])),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),C.error(t+" has not been deleted");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("section",{className:"mb-4 mt-2",children:Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("div",{className:"card-header text-center py-3",children:Object(O.jsxs)("h5",{className:"mb-0 text-center d-flex",children:[Object(O.jsx)("div",{className:" d-flex align-items-center me-auto ms-auto ms-sm-0 mt-2 mt-sm-0 ",children:Object(O.jsx)(f.e,{id:"search-input",type:"search",label:"Search",onChange:function(){var e,t,a,c;for(e=document.getElementById("search-input").value.toUpperCase(),t=document.getElementById("Table").getElementsByTagName("tr"),c=0;c<t.length;c++)(a=t[c].getElementsByTagName("td")[0])&&((a.textContent||a.innerText).toUpperCase().indexOf(e)>-1?t[c].style.display="":t[c].style.display="none")}})}),Object(O.jsx)("div",{className:" d-flex align-items-center mx-auto ms-sm-auto me-sm-0 mt-2 mt-sm-0 ",children:Object(O.jsx)(E,{query:a,username:t})})]})}),Object(O.jsx)("div",{className:"card-body pt-0",children:"true"===p?Object(O.jsx)(g,{}):Object(O.jsx)("div",{className:"table-responsive",children:Object(O.jsxs)("table",{id:"Table",className:"table table-hover text-nowrap table-sm table-auto",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"table-active",children:[Object(O.jsx)("th",{scope:"col",colSpan:2,children:"name"}),Object(O.jsx)("th",{scope:"col",colSpan:1,children:"Size"}),Object(O.jsx)("th",{scope:"col",colSpan:2,children:"Date"}),Object(O.jsx)("th",{scope:"col",colSpan:1,children:"Actions"})]})}),Object(O.jsx)("tbody",{children:r.map((function(e,t){"director"===e.type?e.size="-":e.size>=1073741824?e.size=Math.floor(e.size/1073741824)+" GB":e.size>=1048576?e.size=Math.floor(e.size/1048576)+" MB":e.size=Math.floor(e.size/1024)+" KB";var a=new Date(e.atimeMs);return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{colSpan:2,children:Object(O.jsx)("div",{className:" text-start",children:x.a.extname(e.name)?Object(O.jsx)("a",{href:"http://localhost:8080/download?file=".concat(k||"/").concat(e.name),className:"ms-2 text-default text-start",download:!0,children:e.name}):Object(O.jsx)(d.b,{to:"/?path=".concat(k||"/").concat(e.name,"/"),className:"ms-2 text-default text-start",children:e.name})})}),Object(O.jsx)("td",{children:e.size}),Object(O.jsx)("td",{colSpan:2,children:Object(O.jsx)("p",{className:"mb-0",children:"".concat(a.toLocaleString())})}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{type:"button",className:"btn mx-2 btn-danger btn-sm px-2",onClick:function(){if(x.a.extname(e.name))return I(e.name);C.error("You can't delete a folder'")},children:Object(O.jsx)("i",{className:"fas fa-lg fa-trash-alt"})})})]},t)}))})]})})})]})})}function z(e){var t=Object(b.i)().username,a=e.loggedIn,c=e.user;return a&&c.username===t?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p,{username:t}),Object(O.jsx)(U,{username:t})]}):Object(O.jsx)(b.a,{to:"/"})}function T(e){var t=e.setLoggedIn,a=Object(s.useState)(!1),n=Object(j.a)(a,2),r=n[0],l=n[1],d=Object(s.useState)({username:"",password:""}),m=Object(j.a)(d,2),u=m[0],x=m[1],p=Object(b.g)(),g=function(){var e=Object(o.a)(i.a.mark((function e(a){var c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),c={username:a.target[0].value,password:a.target[1].value},e.prev=2,e.next=5,h.a.post("http://localhost:8080/user/login",c);case 5:(s=e.sent).data.token&&!s.data.error&&(localStorage.setItem("token",s.data.token),t(!0),p.push("/users/".concat(s.data.username,"?path=/"))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(e){x(Object(c.a)(Object(c.a)({},u),{},Object(w.a)({},e.target.name,e.target.value)))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.a,{className:"me-3 btn-lg ",onClick:function(){return l(!r)},children:"Sign in"}),Object(O.jsx)(f.f,{show:r,getOpenState:function(e){return l(e)},tabIndex:"-1",children:Object(O.jsx)(f.i,{children:Object(O.jsx)(f.h,{children:Object(O.jsx)(f.g,{children:Object(O.jsx)("div",{className:"p-5",children:Object(O.jsxs)("div",{className:"text-center",children:[Object(O.jsx)("h4",{className:"text-dark mb-4",children:"Welcome Back!"}),Object(O.jsxs)("form",{onSubmit:g,id:"form1",children:[Object(O.jsx)(f.e,{id:"username",name:"username",label:"Username",type:"text",required:!0,className:"mb-4",validation:"Looks good!",value:u.username,onChange:v}),Object(O.jsx)(f.e,{label:"Password",id:"Password",name:"password",type:"password",className:"mb-4",required:!0,value:u.password,onChange:v}),Object(O.jsx)("div",{className:"row mb-4",children:Object(O.jsx)("div",{className:"col",children:Object(O.jsx)("a",{href:"#",onClick:function(){return alert("Please contact your Adminterator!")},children:"Forgot password?"})})}),Object(O.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign in"})]})]})})})})})})]})}function B(e){var t=e.loggedIn,a=e.setLoggedIn,c=e.user;console.log(c);var s=Object(b.g)();function n(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(f.b,{className:"mx-2",children:[Object(O.jsx)(f.d,{className:"btn-lg ",children:"Go To"}),Object(O.jsxs)(f.c,{className:"mt-1",children:[Object(O.jsx)("li",{children:Object(O.jsx)(d.b,{className:"dropdown-item",to:"/",children:"Home Page"})}),t?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)(d.b,{className:"dropdown-item",to:"/users/".concat(c.username,"?path=/"),children:"Upload Page"})}),"admin"===c.privileges?Object(O.jsx)("li",{children:Object(O.jsx)(d.b,{className:"dropdown-item",to:"/admin-panel/"+c.username,children:"Admin Panel"})}):""]}):""]})]}),Object(O.jsx)(f.a,{className:"mx-2 btn-lg",color:"danger",onClick:function(){localStorage.removeItem("token"),a(!1),s.push("/")},children:"Logout"})]})}return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light rounded-5 mt-4",children:Object(O.jsxs)("div",{className:"container py-md-0",children:[Object(O.jsxs)("div",{className:"d-flex mx-auto ms-lg-0",children:[Object(O.jsx)(d.b,{className:"navbar-brand me-2 ms-md-auto",to:"/",children:Object(O.jsx)("img",{src:"/logo.png",alt:"logo",loading:"lazy",style:{marginTop:"-1px"},height:58})}),Object(O.jsx)("ul",{className:"navbar-nav me-auto mb-md-2 mb-lg-0 me",children:Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(d.b,{to:"/",className:"nav-link fs-2 text-break lobster-font ",children:"Electrical Engineering Digital Library"})})})]}),Object(O.jsx)("div",{className:" d-flex align-items-center mx-auto mx-lg-0 justify-content-center ",children:t?Object(O.jsx)(n,{}):Object(O.jsx)(T,{setLoggedIn:a})})]})})})}function F(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("footer",{className:" page-footer mt-2 text-center text-md-left bg-white rounded-5 mb-5 ",children:Object(O.jsx)("div",{className:"footer-copyright text-center mb-1  py-4 wow fadeIn","data-wow-delay":"0.3s",children:Object(O.jsxs)("div",{className:"row container-fluid lobster-font",children:[Object(O.jsxs)("div",{className:"col",children:[Object(O.jsx)("i",{className:"far fa-copyright"}),"\xa0","".concat((new Date).getFullYear())," Copyright: Designed By\xa0",Object(O.jsx)("a",{className:!0,href:"https://hameemdakheel.herokuapp.com/",children:"Hameem Dakheel"})]}),Object(O.jsx)("div",{className:"col",children:Object(O.jsxs)("ul",{className:"list-unstyled d-flex justify-content-center mb-0 ",children:[Object(O.jsx)("li",{children:Object(O.jsx)("p",{className:"ps-2 ms-2 my-auto",children:"Find me on:"})}),Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"https://github.com/",className:"ps-1 ms-1 my-auto fa-lg fb-ic text-black",children:Object(O.jsx)("i",{className:"fab fa-github f"})})}),Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"https://github.com/",className:"ps-1 ms-1 my-auto fa-lg tw-ic",title:"twitter",children:Object(O.jsx)("i",{className:"fab fa-twitter"})})}),Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"https://github.com/",className:"ps-1 ms-1 my-auto fa-lg li-ic",children:Object(O.jsx)("i",{className:"fab fa-linkedin-in"})})})]})})," "]})})})})}a(70),a(71),a(72);function L(){var e=Object(s.useState)(!1),t=Object(j.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)({}),r=Object(j.a)(n,2),l=r[0],m=r[1],u=localStorage.getItem("token")||"";return Object(s.useEffect)((function(){(function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("http://localhost:8080/user/check-token",{token:u});case 3:if((t=e.sent).data.error||!t.data.decode){e.next=8;break}return c(!0),m(t.data.decode),e.abrupt("return");case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[u]),Object(O.jsx)("div",{children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)(B,{loggedIn:a,setLoggedIn:c,user:l}),Object(O.jsxs)(b.d,{children:[Object(O.jsx)(b.b,{exact:!0,path:"/users/:username?path",children:Object(O.jsx)(z,{loggedIn:a,user:l})}),Object(O.jsx)(b.b,{exact:!0,path:"/users/:username",children:Object(O.jsx)(z,{loggedIn:a,user:l})}),Object(O.jsx)(b.b,{exact:!0,path:"/admin-panel/:username",children:Object(O.jsx)(I,{loggedIn:a,user:l})}),Object(O.jsx)(b.b,{exact:!0,path:"/?path",children:Object(O.jsx)(N,{})}),Object(O.jsx)(b.b,{exact:!0,path:"/",children:Object(O.jsx)(N,{})}),Object(O.jsx)(b.b,{path:"*",children:Object(O.jsx)("section",{className:"mb-4 mt-4",children:Object(O.jsx)("div",{className:"card",children:Object(O.jsxs)("div",{className:"card-header text-center py-3",children:[Object(O.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[Object(O.jsx)("h1",{className:"display-1 h1 d-block big-font",children:"404"}),Object(O.jsx)("h1",{className:"h1 my-3",children:"Opsss!!!"})]}),Object(O.jsx)(d.b,{className:"btn btn-outline-black btn-lg mb-5 shadow-5-soft",to:"/",children:"Go Back Home"})]})})})})]}),Object(O.jsx)(F,{})]})})}var D=function(e){var t=e.options,a=e.message,c=e.close;return Object(O.jsxs)("div",{children:["info"===t.type&&Object(O.jsxs)("div",{className:"alert alert-primary alert-dismissible shadow-5-strong  d-flex align-items-center ",role:"alert",children:[Object(O.jsx)("i",{class:"fas fa-exclamation-circle fa-2x me-2"}),Object(O.jsxs)("div",{children:[" ",a,Object(O.jsx)("button",{className:"btn-close",onClick:c,children:"X"})]})]}),"success"===t.type&&Object(O.jsxs)("div",{className:"alert alert-success alert-dismissible shadow-5-strong  d-flex align-items-center",role:"alert",children:[Object(O.jsx)("i",{class:"fas fa-check-circle fa-2x me-2"}),Object(O.jsxs)("div",{children:[a,Object(O.jsx)("button",{className:"btn-close",onClick:c})]})]}),"error"===t.type&&Object(O.jsxs)("div",{className:"alert alert-danger d-flex align-items-center alert-dismissible shadow-5-strong ",role:"alert",children:[Object(O.jsx)("i",{class:"fas fa-times-circle fa-2x me-2"}),Object(O.jsxs)("div",{children:[a,Object(O.jsx)("button",{className:"btn-close my-auto py-auto",onClick:c})]})]})]})},P={timeout:5e3,position:y.b.TOP_CENTER,transition:y.c.FADE,containerStyle:{zIndex:1070}};r.a.render(Object(O.jsx)(y.a,Object(c.a)(Object(c.a)({template:D},P),{},{children:Object(O.jsx)(L,{})})),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.4b960647.chunk.js.map